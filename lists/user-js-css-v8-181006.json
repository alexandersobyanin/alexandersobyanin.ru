{
  "libs": [
    {
      "name": "jQuery 3",
      "src": "@extension@jquery.min.js"
    }
  ],
  "settings": {
    "badgeCounter": false,
    "editorConfig": {
      "enableBasicAutocompletion": false,
      "enableLiveAutocompletion": true,
      "enableSnippets": true,
      "fontSize": 15,
      "highlightActiveLine": false,
      "keyboardHandler": false,
      "showPrintMargin": false,
      "tabSize": 4,
      "theme": "ace/theme/tomorrow",
      "useSoftTabs": false,
      "useWorker": true,
      "wrap": true
    },
    "supportBtn": false,
    "themesFolder": [
      "chrome",
      "clouds",
      "dawn",
      "dracula",
      "dreamweaver",
      "eclipse",
      "github",
      "monokai",
      "solarized_dark",
      "solarized_light",
      "textmate",
      "tomorrow",
      "tomorrow_night",
      "twilight"
    ],
    "version": 8
  },
  "sites": [
    {
      "compiledCss": "",
      "css": "",
      "id": "qaru.site",
      "js": "setTimeout(function() {\n\t$('div.answer-row > div').removeClass();\n}, 300);",
      "libs": [],
      "options": {
        "altCSS": false,
        "altJS": false,
        "autoImportant": false,
        "on": true
      }
    },
    {
      "compiledCss": "",
      "css": "",
      "id": "https://2ch.hk",
      "js": "var mcode = mcode || {};\r\n\r\nmcode.tasks = {};\r\nmcode.langs = [\"abap\", \"as\", \"as3\", \"ada\", \"antlr\", \"antlr-as\", \"antlr-csharp\", \"antlr-cpp\", \"antlr-java\",\r\n    \"antlr-objc\", \"antlr-perl\", \"antlr-python\", \"antlr-ruby\", \"apacheconf\", \"applescript\", \"aspectj\", \"aspx-cs\",\r\n    \"aspx-vb\", \"asy\", \"ahk\", \"autoit\", \"awk\", \"basemake\", \"bash\", \"console\", \"bat\", \"bbcode\", \"befunge\", \"blitzmax\",\r\n    \"boo\", \"brainfuck\", \"bro\", \"bugs\", \"c\", \"csharp\", \"cpp\", \"c-objdump\", \"ca65\", \"cbmbas\", \"ceylon\", \"cfengine3\",\r\n    \"cfs\", \"cheetah\", \"clojure\", \"cmake\", \"cobol\", \"cobolfree\", \"coffee-script\", \"cfm\", \"common-lisp\", \"coq\",\r\n    \"cpp-objdump\", \"croc\", \"css\", \"css+django\", \"css+genshitext\", \"css+lasso\", \"css+mako\", \"css+myghty\", \"css+php\",\r\n    \"css+erb\", \"css+smarty\", \"cuda\", \"cython\", \"d\", \"d-objdump\", \"dpatch\", \"dart\", \"control\", \"sourceslist\", \"delphi\",\r\n    \"dg\", \"diff\", \"django\", \"dtd\", \"duel\", \"dylan\", \"dylan-console\", \"dylan-lid\", \"ec\", \"ecl\", \"elixir\", \"iex\",\r\n    \"ragel-em\", \"erb\", \"erlang\", \"erl\", \"evoque\", \"factor\", \"fancy\", \"fan\", \"felix\", \"fortran\", \"clipper\", \"fsharp\",\r\n    \"gas\", \"genshi\", \"genshitext\", \"pot\", \"cucumber\", \"glsl\", \"gnuplot\", \"go\", \"gooddata-cl\", \"gosu\", \"gst\", \"groff\",\r\n    \"groovy\", \"haml\", \"haskell\", \"hx\", \"html\", \"html+cheetah\", \"html+django\", \"html+evoque\", \"html+genshi\",\r\n    \"html+lasso\", \"html+mako\", \"html+myghty\", \"html+php\", \"html+smarty\", \"html+velocity\", \"http\", \"haxeml\", \"hybris\",\r\n    \"idl\", \"ini\", \"io\", \"ioke\", \"irc\", \"jade\", \"jags\", \"java\", \"jsp\", \"js\", \"js+cheetah\", \"js+django\", \"js+genshitext\",\r\n    \"js+lasso\", \"js+mako\", \"js+myghty\", \"js+php\", \"js+erb\", \"js+smarty\", \"json\", \"julia\", \"jlcon\", \"kconfig\", \"koka\",\r\n    \"kotlin\", \"lasso\", \"lighty\", \"lhs\", \"live-script\", \"llvm\", \"logos\", \"logtalk\", \"lua\", \"make\", \"mako\", \"maql\",\r\n    \"mason\", \"matlab\", \"matlabsession\", \"minid\", \"modelica\", \"modula2\", \"trac-wiki\", \"monkey\", \"moocode\", \"moon\",\r\n    \"mscgen\", \"mupad\", \"mxml\", \"myghty\", \"mysql\", \"nasm\", \"nemerle\", \"newlisp\", \"newspeak\", \"nginx\", \"nimrod\", \"nsis\",\r\n    \"numpy\", \"objdump\", \"objective-c\", \"objective-c++\", \"objective-j\", \"ocaml\", \"octave\", \"ooc\", \"opa\", \"openedge\",\r\n    \"perl\", \"php\", \"plpgsql\", \"psql\", \"postgresql\", \"postscript\", \"pov\", \"powershell\", \"prolog\", \"properties\",\r\n    \"protobuf\", \"puppet\", \"pypylog\", \"python\", \"python3\", \"py3tb\", \"pycon\", \"pytb\", \"qml\", \"racket\", \"ragel\",\r\n    \"ragel-c\", \"ragel-cpp\", \"ragel-d\", \"ragel-java\", \"ragel-objc\", \"ragel-ruby\", \"raw\", \"rconsole\", \"rd\", \"rebol\",\r\n    \"redcode\", \"registry\", \"rst\", \"rhtml\", \"RobotFramework\", \"spec\", \"rb\", \"rbcon\", \"rust\", \"splus\", \"sass\", \"scala\",\r\n    \"ssp\", \"scaml\", \"scheme\", \"scilab\", \"scss\", \"shell-session\", \"smali\", \"smalltalk\", \"smarty\", \"snobol\", \"sp\", \"sql\",\r\n    \"sqlite3\", \"squidconf\", \"stan\", \"sml\", \"systemverilog\", \"tcl\", \"tcsh\", \"tea\", \"tex\", \"text\", \"treetop\", \"ts\",\r\n    \"urbiscript\", \"vala\", \"vb.net\", \"velocity\", \"verilog\", \"vgl\", \"vhdl\", \"vim\", \"xml\", \"xml+cheetah\", \"xml+django\",\r\n    \"xml+evoque\", \"xml+lasso\", \"xml+mako\", \"xml+myghty\", \"xml+php\", \"xml+erb\", \"xml+smarty\", \"xml+velocity\", \"xquery\",\r\n    \"xslt\", \"xtend\", \"yaml\", /*Here follows aliases*/\r\n    \"lisp\", \"c#\", \"f#\", \"ruby\"];\r\nmcode.lexerSelectHtml = \"<select id='makabaCodeLexer'><option value='abap'>ABAP</option>\"\r\n    + \"<option value='as'>ActionScript</option><option value='as3'>ActionScript 3</option>\"\r\n    + \"<option value='ada'>Ada</option><option value='antlr'>ANTLR</option>\"\r\n    + \"<option value='antlr-as'>ANTLR With ActionScript Target</option>\"\r\n    + \"<option value='antlr-csharp'>ANTLR With C# Target</option>\"\r\n    + \"<option value='antlr-cpp'>ANTLR With CPP Target</option>\"\r\n    + \"<option value='antlr-java'>ANTLR With Java Target</option>\"\r\n    + \"<option value='antlr-objc'>ANTLR With ObjectiveC Target</option>\"\r\n    + \"<option value='antlr-perl'>ANTLR With Perl Target</option>\"\r\n    + \"<option value='antlr-python'>ANTLR With Python Target</option>\"\r\n    + \"<option value='antlr-ruby'>ANTLR With Ruby Target</option><option value='apacheconf'>ApacheConf</option>\"\r\n    + \"<option value='applescript'>AppleScript</option><option value='aspectj'>AspectJ</option>\"\r\n    + \"<option value='aspx-cs'>aspx-cs</option><option value='aspx-vb'>aspx-vb</option>\"\r\n    + \"<option value='asy'>Asymptote</option><option value='ahk'>autohotkey</option>\"\r\n    + \"<option value='autoit'>AutoIt</option><option value='awk'>Awk</option>\"\r\n    + \"<option value='basemake'>Base Makefile</option><option value='bash'>Bash</option>\"\r\n    + \"<option value='console'>Bash Session</option><option value='bat'>Batchfile</option>\"\r\n    + \"<option value='bbcode'>BBCode</option><option value='befunge'>Befunge</option>\"\r\n    + \"<option value='blitzmax'>BlitzMax</option><option value='boo'>Boo</option>\"\r\n    + \"<option value='brainfuck'>Brainfuck</option><option value='bro'>Bro</option><option value='bugs'>BUGS</option>\"\r\n    + \"<option value='c'>C</option><option value='csharp'>C#</option><option value='cpp'>C++</option>\"\r\n    + \"<option value='c-objdump'>c-objdump</option><option value='ca65'>ca65</option>\"\r\n    + \"<option value='cbmbas'>CBM BASIC V2</option><option value='ceylon'>Ceylon</option>\"\r\n    + \"<option value='cfengine3'>CFEngine3</option><option value='cfs'>cfstatement</option>\"\r\n    + \"<option value='cheetah'>Cheetah</option><option value='clojure'>Clojure</option>\"\r\n    + \"<option value='cmake'>CMake</option><option value='cobol'>COBOL</option>\"\r\n    + \"<option value='cobolfree'>COBOLFree</option><option value='coffee-script'>CoffeeScript</option>\"\r\n    + \"<option value='cfm'>Coldfusion HTML</option><option value='common-lisp'>Common Lisp</option>\"\r\n    + \"<option value='coq'>Coq</option><option value='cpp-objdump'>cpp-objdump</option>\"\r\n    + \"<option value='croc'>Croc</option><option value='css'>CSS</option>\"\r\n    + \"<option value='css+django'>CSS+Django/Jinja</option><option value='css+genshitext'>CSS+Genshi Text</option>\"\r\n    + \"<option value='css+lasso'>CSS+Lasso</option><option value='css+mako'>CSS+Mako</option>\"\r\n    + \"<option value='css+myghty'>CSS+Myghty</option><option value='css+php'>CSS+PHP</option>\"\r\n    + \"<option value='css+erb'>CSS+Ruby</option><option value='css+smarty'>CSS+Smarty</option>\"\r\n    + \"<option value='cuda'>CUDA</option><option value='cython'>Cython</option><option value='d'>D</option>\"\r\n    + \"<option value='d-objdump'>d-objdump</option><option value='dpatch'>Darcs Patch</option>\"\r\n    + \"<option value='dart'>Dart</option><option value='control'>Debian Control file</option>\"\r\n    + \"<option value='sourceslist'>Debian Sourcelist</option><option value='delphi'>Delphi</option>\"\r\n    + \"<option value='dg'>dg</option><option value='diff'>Diff</option><option value='django'>Django/Jinja</option>\"\r\n    + \"<option value='dtd'>DTD</option><option value='duel'>Duel</option><option value='dylan'>Dylan</option>\"\r\n    + \"<option value='dylan-console'>Dylan session</option><option value='dylan-lid'>DylanLID</option>\"\r\n    + \"<option value='ec'>eC</option><option value='ecl'>ECL</option><option value='elixir'>Elixir</option>\"\r\n    + \"<option value='iex'>Elixir iex session</option><option value='ragel-em'>Embedded Ragel</option>\"\r\n    + \"<option value='erb'>ERB</option><option value='erlang'>Erlang</option>\"\r\n    + \"<option value='erl'>Erlang erl session</option><option value='evoque'>Evoque</option>\"\r\n    + \"<option value='factor'>Factor</option><option value='fancy'>Fancy</option>\"\r\n    + \"<option value='fan'>Fantom</option><option value='felix'>Felix</option><option value='fortran'>Fortran</option>\"\r\n    + \"<option value='Clipper'>FoxPro</option><option value='fsharp'>FSharp</option><option value='gas'>GAS</option>\"\r\n    + \"<option value='genshi'>Genshi</option><option value='genshitext'>Genshi Text</option>\"\r\n    + \"<option value='pot'>Gettext Catalog</option><option value='Cucumber'>Gherkin</option>\"\r\n    + \"<option value='glsl'>GLSL</option><option value='gnuplot'>Gnuplot</option><option value='go'>Go</option>\"\r\n    + \"<option value='gooddata-cl'>GoodData-CL</option><option value='gosu'>Gosu</option>\"\r\n    + \"<option value='gst'>Gosu Template</option><option value='groff'>Groff</option>\"\r\n    + \"<option value='groovy'>Groovy</option><option value='haml'>Haml</option>\"\r\n    + \"<option value='haskell'>Haskell</option><option value='hx'>haXe</option><option value='html'>HTML</option>\"\r\n    + \"<option value='html+cheetah'>HTML+Cheetah</option><option value='html+django'>HTML+Django/Jinja</option>\"\r\n    + \"<option value='html+evoque'>HTML+Evoque</option><option value='html+genshi'>HTML+Genshi</option>\"\r\n    + \"<option value='html+lasso'>HTML+Lasso</option><option value='html+mako'>HTML+Mako</option>\"\r\n    + \"<option value='html+myghty'>HTML+Myghty</option><option value='html+php'>HTML+PHP</option>\"\r\n    + \"<option value='html+smarty'>HTML+Smarty</option><option value='html+velocity'>HTML+Velocity</option>\"\r\n    + \"<option value='http'>HTTP</option><option value='haxeml'>Hxml</option><option value='hybris'>Hybris</option>\"\r\n    + \"<option value='idl'>IDL</option><option value='ini'>INI</option><option value='io'>Io</option>\"\r\n    + \"<option value='ioke'>Ioke</option><option value='irc'>IRC logs</option><option value='jade'>Jade</option>\"\r\n    + \"<option value='jags'>JAGS</option><option value='java'>Java</option>\"\r\n    + \"<option value='jsp'>Java Server Page</option><option value='js'>JavaScript</option>\"\r\n    + \"<option value='js+cheetah'>JavaScript+Cheetah</option>\"\r\n    + \"<option value='js+django'>JavaScript+Django/Jinja</option>\"\r\n    + \"<option value='js+genshitext'>JavaScript+Genshi Text</option><option value='js+lasso'>JavaScript+Lasso</option>\"\r\n    + \"<option value='js+mako'>JavaScript+Mako</option><option value='js+myghty'>JavaScript+Myghty</option>\"\r\n    + \"<option value='js+php'>JavaScript+PHP</option><option value='js+erb'>JavaScript+Ruby</option>\"\r\n    + \"<option value='js+smarty'>JavaScript+Smarty</option><option value='json'>JSON</option>\"\r\n    + \"<option value='julia'>Julia</option><option value='jlcon'>Julia console</option>\"\r\n    + \"<option value='kconfig'>Kconfig</option><option value='koka'>Koka</option>\"\r\n    + \"<option value='kotlin'>Kotlin</option><option value='lasso'>Lasso</option>\"\r\n    + \"<option value='lighty'>Lighttpd configuration file</option><option value='lhs'>Literate Haskell</option>\"\r\n    + \"<option value='live-script'>LiveScript</option><option value='llvm'>LLVM</option>\"\r\n    + \"<option value='logos'>Logos</option><option value='logtalk'>Logtalk</option><option value='lua'>Lua</option>\"\r\n    + \"<option value='make'>Makefile</option><option value='mako'>Mako</option><option value='maql'>MAQL</option>\"\r\n    + \"<option value='mason'>Mason</option><option value='matlab'>Matlab</option>\"\r\n    + \"<option value='matlabsession'>Matlab session</option><option value='minid'>MiniD</option>\"\r\n    + \"<option value='modelica'>Modelica</option><option value='modula2'>Modula-2</option>\"\r\n    + \"<option value='trac-wiki'>MoinMoin/Trac Wiki markup</option><option value='monkey'>Monkey</option>\"\r\n    + \"<option value='moocode'>MOOCode</option><option value='moon'>MoonScript</option>\"\r\n    + \"<option value='mscgen'>Mscgen</option><option value='mupad'>MuPAD</option><option value='mxml'>MXML</option>\"\r\n    + \"<option value='myghty'>Myghty</option><option value='mysql'>MySQL</option><option value='nasm'>NASM</option>\"\r\n    + \"<option value='nemerle'>Nemerle</option><option value='newlisp'>NewLisp</option>\"\r\n    + \"<option value='newspeak'>Newspeak</option><option value='nginx'>Nginx configuration file</option>\"\r\n    + \"<option value='nimrod'>Nimrod</option><option value='nsis'>NSIS</option><option value='numpy'>NumPy</option>\"\r\n    + \"<option value='objdump'>objdump</option><option value='objective-c'>Objective-C</option>\"\r\n    + \"<option value='objective-c++'>Objective-C++</option><option value='objective-j'>Objective-J</option>\"\r\n    + \"<option value='ocaml'>OCaml</option><option value='octave'>Octave</option><option value='ooc'>Ooc</option>\"\r\n    + \"<option value='opa'>Opa</option><option value='openedge'>OpenEdge ABL</option>\"\r\n    + \"<option value='perl'>Perl</option><option value='php'>PHP</option><option value='plpgsql'>PL/pgSQL</option>\"\r\n    + \"<option value='psql'>PostgreSQL console (psql)</option>\"\r\n    + \"<option value='postgresql'>PostgreSQL SQL dialect</option><option value='postscript'>PostScript</option>\"\r\n    + \"<option value='pov'>POVRay</option><option value='powershell'>PowerShell</option>\"\r\n    + \"<option value='prolog'>Prolog</option><option value='properties'>Properties</option>\"\r\n    + \"<option value='protobuf'>Protocol Buffer</option><option value='puppet'>Puppet</option>\"\r\n    + \"<option value='pypylog'>PyPy Log</option><option value='python'>Python</option>\"\r\n    + \"<option value='python3'>Python 3</option><option value='py3tb'>Python 3.0 Traceback</option>\"\r\n    + \"<option value='pycon'>Python console session</option><option value='pytb'>Python Traceback</option>\"\r\n    + \"<option value='qml'>QML</option><option value='racket'>Racket</option><option value='ragel'>Ragel</option>\"\r\n    + \"<option value='ragel-c'>Ragel in C Host</option><option value='ragel-cpp'>Ragel in CPP Host</option>\"\r\n    + \"<option value='ragel-d'>Ragel in D Host</option><option value='ragel-java'>Ragel in Java Host</option>\"\r\n    + \"<option value='ragel-objc'>Ragel in Objective C Host</option>\"\r\n    + \"<option value='ragel-ruby'>Ragel in Ruby Host</option><option value='raw'>Raw token data</option>\"\r\n    + \"<option value='rconsole'>RConsole</option><option value='rd'>Rd</option><option value='rebol'>REBOL</option>\"\r\n    + \"<option value='redcode'>Redcode</option><option value='registry'>reg</option>\"\r\n    + \"<option value='rst'>reStructuredText</option><option value='rhtml'>RHTML</option>\"\r\n    + \"<option value='RobotFramework'>RobotFramework</option><option value='spec'>RPMSpec</option>\"\r\n    + \"<option value='rb'>Ruby</option><option value='rbcon'>Ruby irb session</option>\"\r\n    + \"<option value='rust'>Rust</option>\"\r\n    + \"<option value='splus'>S</option><option value='sass'>Sass</option><option value='scala'>Scala</option>\"\r\n    + \"<option value='ssp'>Scalate Server Page</option><option value='scaml'>Scaml</option>\"\r\n    + \"<option value='scheme'>Scheme</option><option value='scilab'>Scilab</option><option value='scss'>SCSS</option>\"\r\n    + \"<option value='shell-session'>Shell Session</option><option value='smali'>Smali</option>\"\r\n    + \"<option value='smalltalk'>Smalltalk</option><option value='smarty'>Smarty</option>\"\r\n    + \"<option value='snobol'>Snobol</option><option value='sp'>SourcePawn</option><option value='sql'>SQL</option>\"\r\n    + \"<option value='sqlite3'>sqlite3con</option>\"\r\n    + \"<option value='squidconf'>SquidConf</option><option value='stan'>Stan</option>\"\r\n    + \"<option value='sml'>Standard ML</option><option value='systemverilog'>systemverilog</option>\"\r\n    + \"<option value='tcl'>Tcl</option><option value='tcsh'>Tcsh</option><option value='tea'>Tea</option>\"\r\n    + \"<option value='tex'>TeX</option><option selected='true' value='text'>Text only</option>\"\r\n    + \"<option value='treetop'>Treetop</option><option value='ts'>TypeScript</option>\"\r\n    + \"<option value='urbiscript'>UrbiScript</option><option value='vala'>Vala</option>\"\r\n    + \"<option value='vb.net'>VB.net</option><option value='velocity'>Velocity</option>\"\r\n    + \"<option value='verilog'>verilog</option><option value='vgl'>VGL</option><option value='vhdl'>vhdl</option>\"\r\n    + \"<option value='vim'>VimL</option><option value='xml'>XML</option>\"\r\n    + \"<option value='xml+cheetah'>XML+Cheetah</option>\"\r\n    + \"<option value='xml+django'>XML+Django/Jinja</option><option value='xml+evoque'>XML+Evoque</option>\"\r\n    + \"<option value='xml+lasso'>XML+Lasso</option><option value='xml+mako'>XML+Mako</option>\"\r\n    + \"<option value='xml+myghty'>XML+Myghty</option><option value='xml+php'>XML+PHP</option>\"\r\n    + \"<option value='xml+erb'>XML+Ruby</option><option value='xml+smarty'>XML+Smarty</option>\"\r\n    + \"<option value='xml+velocity'>XML+Velocity</option><option value='xquery'>XQuery</option>\"\r\n    + \"<option value='xslt'>XSLT</option><option value='xtend'>Xtend</option><option value='yaml'>YAML</option>\"\r\n    + \"</select>\";\r\nmcode.styleSelectHtml = \"<select id='makabaCodeStyle'><option value='autumn'>autumn</option>\"\r\n    + \"<option value='borland'>borland</option><option value='bw'>bw</option>\"\r\n    + \"<option value='colorful'>colorful</option><option value='default'>default</option>\"\r\n    + \"<option value='emacs'>emacs</option><option value='friendly'>friendly</option>\"\r\n    + \"<option value='fruity'>fruity</option><option value='manni'>manni</option>\"\r\n    + \"<option value='monokai'>monokai</option><option value='murphy'>murphy</option>\"\r\n    + \"<option value='native'>native</option><option value='pastie'>pastie</option>\"\r\n    + \"<option value='perldoc'>perldoc</option><option value='rrt'>rrt</option><option value='tango'>tango</option>\"\r\n    + \"<option value='trac'>trac</option><option value='vim'>vim</option><option value='vs'>vs</option></select>\";\r\nmcode.lineNosHtml = \"<input id='makabaCodeLineNos' id='linenos' type='checkbox' />\";\r\nmcode.makabaTags = [\"b\", \"i\", \"u\", \"s\", \"o\", \"sup\", \"sub\", \"spoiler\"];\r\n\r\nmcode.inLangs = function(lang) {\r\n    if (!lang)\r\n        return true;\r\n    for (var i = 0; i < mcode.langs.length; ++i) {\r\n        if (lang == mcode.langs[i])\r\n            return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nmcode.isEmpty = function(obj) {\r\n    if (!obj)\r\n        return true;\r\n    for (p in obj) {\r\n        if (obj.hasOwnProperty(p))\r\n            return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nmcode.toCenter = function(element) {\r\n    if (!element)\r\n        return;\r\n    var doc = document.documentElement;\r\n    element.style.left = (doc.clientWidth / 2 - element.offsetWidth / 2) + \"px\";\r\n    element.style.top = (doc.clientHeight / 2 - element.offsetHeight / 2) + \"px\";\r\n};\r\n\r\nmcode.filled = function(what, count) {\r\n    var s = \"\";\r\n    for (var i = 0; i < count; ++i)\r\n        s += what;\r\n    return s;\r\n};\r\n\r\nmcode.replaceTabs = function(s, tabWidth) {\r\n    var i = 0;\r\n    while (i < s.length) {\r\n        if (s.charAt(i) == \"\\t\") {\r\n            var spcount = tabWidth - (i < tabWidth ? i : i % tabWidth);\r\n            s = s.substr(0, i) + mcode.filled(\" \", spcount ? spcount : tabWidth) + s.substr(i + 1);\r\n            i += spcount;\r\n        } else {\r\n            ++i;\r\n        }\r\n    }\r\n    return s;\r\n};\r\n\r\nmcode.language = function(source) {\r\n    var lang = source.match(/lang\\=\"?(\\w|\\+|\\-| |#)+\"?\\]/gi);\r\n    if (!lang)\r\n        return null;\r\n    lang = lang[0].replace(\"lang=\", \"\").replace(\"]\", \"\").split(\"\\\"\").join(\"\").replace(\" \", \"-\");\r\n    lang = lang.replace(\"++\", \"pp\").toLowerCase();\r\n    if (\"lisp\" == lang)\r\n        lang = \"common-lisp\";\r\n    else if (\"ruby\" == lang)\r\n        lang = \"rb\";\r\n    else if (\"c#\" == lang)\r\n        lang = \"csharp\";\r\n    else if (\"f#\" == lang)\r\n        lang = \"fsharp\";\r\n    return lang;\r\n};\r\n\r\nmcode.code = function(source) {\r\n    var ind = source.indexOf(\"]\");\r\n    var code = source.substring(ind + 1, source.length - 7);\r\n    code = code.split(\"<em>\").join(\"*\").split(\"</em>\").join(\"*\").split(\"<br>\").join(\"\\n\");\r\n    code = code.split(\"&lt;\").join(\"<\").split(\"&gt;\").join(\">\").split(\"&quot;\").join(\"\\\"\").split(\"&amp;\").join(\"&\");\r\n    code = code.split(\"#92;\").join(\"\\\\\");\r\n    if (code.length < 1)\r\n       return code;\r\n    mcode.makabaTags.forEach(function(tag) {\r\n        code = code.split(\"[ \" + tag + \" ]\").join(\"[\" + tag + \"]\");\r\n    });\r\n    while (code.indexOf(\"\\n\") == 0)\r\n        code = code.substr(1);\r\n    while (code.lastIndexOf(\"\\n\") == code.length - 1)\r\n        code = code.substr(0, code.length - 1);\r\n    var lines = code.split(\"\\n\");\r\n    for (var i = 0; i < lines.length; ++i)\r\n        lines[i] = mcode.replaceTabs(lines[i], 4);\r\n    code = lines.join(\"\\n\");\r\n    return code;\r\n};\r\n\r\nmcode.appendRow = function(table, labelText, html) {\r\n    if (!table || !labelText || !html)\r\n        return;\r\n    var tr = document.createElement(\"tr\");\r\n    var tdl = document.createElement(\"td\");\r\n    tdl.appendChild(document.createTextNode(labelText));\r\n    tr.appendChild(tdl);\r\n    var td = document.createElement(\"td\");\r\n    td.innerHTML = html;\r\n    tr.appendChild(td);\r\n    table.appendChild(tr);\r\n};\r\n\r\nmcode.showSettings = function() {\r\n    var div = document.createElement(\"div\");\r\n    div.style.position = \"fixed\";\r\n    div.style.zIndex = \"9000\";\r\n    div.style.height = \"120px\";\r\n    div.style.width = \"300px\";\r\n    div.style.backgroundColor = \"#DDDDDD\";\r\n    var table = document.createElement(\"table\");\r\n    mcode.appendRow(table, \"Стиль:\", mcode.styleSelectHtml);\r\n    mcode.appendRow(table, \"Номера строк:\", mcode.lineNosHtml);\r\n    div.appendChild(table);\r\n    var font = document.createElement(\"font\");\r\n    font.color = \"red\";\r\n    font.appendChild(document.createTextNode(\"Не забудьте обновить страницу!\"));\r\n    div.appendChild(font);\r\n    var buttonBox = document.createElement(\"div\");\r\n    buttonBox.style.position = \"absolute\";\r\n    buttonBox.style.bottom = \"5px\";\r\n    buttonBox.style.right = \"10px\";\r\n    var button = document.createElement(\"button\");\r\n    button.appendChild(document.createTextNode(\"Сохранить\"));\r\n    button.onclick = function() {\r\n        GM_setValue(\"makabaCodeStyle\", sel.options[sel.selectedIndex].value);\r\n        GM_setValue(\"makabaCodeLineNos\", !!lineNos.checked);\r\n        document.body.removeChild(div);\r\n    };\r\n    buttonBox.appendChild(button);\r\n    var cButton = document.createElement(\"button\");\r\n    cButton.appendChild(document.createTextNode(\"Отмена\"));\r\n    cButton.onclick = function() {\r\n        document.body.removeChild(div);\r\n    };\r\n    buttonBox.appendChild(cButton);\r\n    div.appendChild(buttonBox);\r\n    document.body.appendChild(div);\r\n    var sel = document.getElementById(\"makabaCodeStyle\");\r\n    var lineNos = document.getElementById(\"makabaCodeLineNos\");\r\n    var style = GM_getValue(\"makabaCodeStyle\", \"friendly\");\r\n    for (var i = 0; i < sel.options.length; ++i) {\r\n        if (style == sel.options[i].value) {\r\n            sel.options[i].selected = true;\r\n            break;\r\n        }\r\n    }\r\n    if (!!GM_getValue(\"makabaCodeLineNos\", false))\r\n        lineNos.checked = true;\r\n    mcode.toCenter(div);\r\n};\r\n\r\nmcode.subtaskReceived = function(element, source, target) {\r\n    var task = {\r\n        \"source\": source,\r\n        \"target\": target\r\n    };\r\n    mcode.tasks[element.id][\"subtasks\"].push(task);\r\n    if (mcode.tasks[element.id][\"subtasks\"].length == mcode.tasks[element.id][\"subtaskCount\"]) {\r\n        mcode.doTask(element, mcode.tasks[element.id][\"subtasks\"]);\r\n        delete mcode.tasks[element.id];\r\n    }\r\n};\r\n\r\nmcode.doTask = function(element, subtasks) {\r\n    if (!element || !subtasks || 0 === subtasks.length)\r\n        return;\r\n    var html = element.innerHTML;\r\n    subtasks.forEach(function(task) {\r\n        var source = task[\"source\"];\r\n        var target = task[\"target\"];\r\n        html = html.replace(source, target);\r\n    });\r\n    element.innerHTML = html;\r\n};\r\n\r\nmcode.request = function(element, source, lang) {\r\n    if (!element || typeof source != \"string\")\r\n        return;\r\n    if (!lang) {\r\n        lang = mcode.language(source);\r\n        if (!mcode.inLangs(lang)) {\r\n            delete mcode.tasks[element.id];\r\n            return;\r\n        }\r\n    }\r\n    var params = \"code=\" + encodeURIComponent(mcode.code(source));\r\n    params += \"&lexer=\" + (!!lang ? encodeURIComponent(lang) : \"text\");\r\n    params += \"&style=\" + GM_getValue(\"makabaCodeStyle\", \"friendly\");\r\n    if (!!GM_getValue(\"makabaCodeLineNos\", false))\r\n        params += \"&linenos=true\";\r\n    GM_xmlhttpRequest({\r\n        method: \"POST\",\r\n        url: \"http://hilite.me/api\",\r\n        data: params,\r\n        headers: {\r\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n        },\r\n        onload: function(res) {\r\n            if (4 === res.readyState) {\r\n                if (200 == res.status) {\r\n                    var html = res.responseText;\r\n                    html = html.replace(\"overflow:auto;\", \"overflow-y:hidden;\");\r\n                    html = html.replace(\"<pre style=\\\"margin: 0;\", \"<pre style=\\\"overflow-y: hidden; margin: 0;\");\r\n                    if (!!GM_getValue(\"makabaCodeLineNos\", false))\r\n                        html = html.replace(\"<pre style=\\\"margin: 0;\", \"<pre style=\\\"overflow-y: hidden; margin: 0;\");\r\n                    //Yep, twice, because there are two <pre> tags if (line numbers are enabled)\r\n                    mcode.subtaskReceived(element, source, html);\r\n                } else {\r\n                    delete mcode.tasks[element.id];\r\n                    alert(res.statusText);\r\n                }\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\nmcode.processExpand = function(expand) {\r\n    if (!expand)\r\n        return;\r\n    var a = document.createElement(\"a\");\r\n    a.appendChild(document.createTextNode(\"Показать текст полностью\"));\r\n    var id = expand.parentNode.id.replace(\"m\", \"\");\r\n    a.id = \"expandLink\" + id;\r\n    (function(id, a) {\r\n        document.body.addEventListener(\"click\", function(e) {\r\n            if (a.id != e.target.id)\r\n                return;\r\n            var parent = document.getElementById(\"m\" + id);\r\n            parent.removeChild(document.getElementById(\"shrinked-post\" + id));\r\n            parent.removeChild(document.getElementById(\"expandLink\" + id));\r\n            parent.innerHTML = document.getElementById(\"original-post\" + id).innerHTML;\r\n        }, false);\r\n    })(id, a);\r\n    expand.parentNode.replaceChild(a, expand);\r\n};\r\n\r\nmcode.processBlockquote = function(element) {\r\n    if (!element || !element.childNodes)\r\n        return;\r\n    element[\"makaba-code\"] = \"true\";\r\n    var html = element.innerHTML;\r\n    var rx = /\\[code(\\s+lang\\=\"?(\\w|\\+|\\-| |#)+\"?)?\\].+?\\[\\/code\\]/gi;\r\n    var matches = html.match(rx);\r\n    if (!matches)\r\n        return;\r\n    var expand = element.querySelector(\"span.expand-large-comment\");\r\n    if (expand)\r\n        mcode.processExpand(expand);\r\n    mcode.tasks[element.id] = {\r\n        \"subtasks\": [],\r\n        \"subtaskCount\": matches.length,\r\n    };\r\n    matches.forEach(function(source) {\r\n        mcode.request(element, source);\r\n    });\r\n};\r\n\r\nmcode.processLink = function(link, host, href, after) {\r\n    if (!link || !host || !href)\r\n        return;\r\n    link[\"makaba-code\"] = \"true\";\r\n    (function(link) {\r\n        var rx = new RegExp(host + \"\\/(\\\\w+)\");\r\n        var m = link.href.match(rx);\r\n        if (!m || m.length < 2)\r\n            return;\r\n        var id = m[1];\r\n        var div = document.createElement(\"div\");\r\n        div.style.overflow = \"hidden\";\r\n        div.style.width = \"1000px\";\r\n        var iframe = document.createElement(\"iframe\");\r\n        iframe.style.margin = 0;\r\n        iframe.style.width = \"1000px\";\r\n        iframe.style.border = \"none\";\r\n        iframe.style.overflow = \"hidden\";\r\n        iframe.style.scrolling = \"no\";\r\n        iframe.src = href.replace(\"%id%\", id);\r\n        div.appendChild(iframe);\r\n        if (typeof after != \"function\") {\r\n            var height = (typeof after == \"number\") ? after : 500;\r\n            div.style.height = height + \"px\";\r\n            iframe.style.height = height + \"px\";\r\n            return;\r\n        }\r\n        GM_xmlhttpRequest({\r\n            method: \"GET\",\r\n            url: href.replace(\"%id%\", id),\r\n            onload: function(res) {\r\n                if (4 === res.readyState) {\r\n                    if (200 == res.status) {\r\n                        var html = res.responseText;\r\n                        var height = after(html);\r\n                        div.style.height = height + \"px\";\r\n                        iframe.style.height = height + \"px\";\r\n                        if (html.indexOf(\"<div\") < 0)\r\n                            return;\r\n                        link.parentNode.replaceChild(div, link);\r\n                    } else {\r\n                        alert(res.statusText);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    })(link);\r\n};\r\n\r\nmcode.processLinks = function(host, href, after) {\r\n    var links = document.body.querySelectorAll(\"a[href^='http://\" + host + \"/']:not([makaba-code='true']), \"\r\n        + \"a[href^='https://\" + host + \"/']:not([makaba-code='true'])\");\r\n    if (!links)\r\n        return;\r\n    for (var i = 0; i < links.length; ++i)\r\n        mcode.processLink(links[i], host, href, after);\r\n};\r\n\r\nmcode.execute = function() {\r\n    var elements = document.body.querySelectorAll(\"blockquote.post-message:not([makaba-code='true'])\");\r\n    if (elements) {\r\n        for (var i = 0; i < elements.length; ++i)\r\n            mcode.processBlockquote(elements[i]);\r\n    }\r\n    mcode.processLinks(\"pastebin.com\", \"https://pastebin.com/embed_iframe.php?i=%id%\", function(html) {\r\n        return 21 * (html.match(/<li/gi) || []).length + 22 + 1;\r\n    });\r\n    mcode.processLinks(\"ideone.com\", \"https://ideone.com/embed/%id%\", function(html) {\r\n        return 20 * (html.match(/<li class\\=\"li1/gi) || []).length + 35 + 16;\r\n    });\r\n    mcode.processLinks(\"jsfiddle.net\", \"https://jsfiddle.net/%id%/embedded\");\r\n};\r\n\r\nmcode.caretPos = function(ctrl) {\r\n    var caretPos = 0;   // IE Support\r\n    if (document.selection) {\r\n        ctrl.focus ();\r\n        var sel = document.selection.createRange ();\r\n        sel.moveStart ('character', -ctrl.value.length);\r\n        caretPos = Sel.text.length;\r\n    } else if (ctrl.selectionStart || ctrl.selectionStart == '0') { // Firefox support\r\n        caretPos = ctrl.selectionStart;\r\n    }\r\n    return (caretPos);\r\n};\r\n\r\nmcode.setCaretPos = function(ctrl, pos) {\r\n    if(ctrl.setSelectionRange) {\r\n        ctrl.focus();\r\n        ctrl.setSelectionRange(pos,pos);\r\n    } else if (ctrl.createTextRange) {\r\n        var range = ctrl.createTextRange();\r\n        range.collapse(true);\r\n        range.moveEnd('character', pos);\r\n        range.moveStart('character', pos);\r\n        range.select();\r\n    }\r\n};\r\n\r\nmcode.insertCodeTag = function(lang) {\r\n    var field = document.getElementById(\"shampoo\");\r\n    var value = \"[code lang=\\\"\" + lang + \"\\\"]\\n\\n[/code]\";\r\n    var m = 0;\r\n    if (document.selection) {\r\n        field.focus();\r\n        var sel = document.selection.createRange();\r\n        sel.text = value;\r\n    } else if (field.selectionStart || field.selectionStart == \"0\") {\r\n        var startPos = field.selectionStart;\r\n        var endPos = field.selectionEnd;\r\n        m = field.value.length - endPos;\r\n        field.value = field.value.substring(0, startPos) + value + field.value.substring(endPos);\r\n    } else {\r\n        field.value += value;\r\n    }\r\n    mcode.setCaretPos(field, mcode.caretPos(field) - 8 - m);\r\n    field.focus();\r\n};\r\n\r\nmcode.processBeforeSubmit = function() {\r\n    var shampoo = document.getElementById(\"shampoo\");\r\n    var text = shampoo.value;\r\n    var rx = /\\[code(\\s+lang\\=\"?(\\w|\\+|\\-| |#)+\"?)?\\](.|\\n)+?\\[\\/code\\]/gi;\r\n    var matches = text.match(rx);\r\n    if (!matches)\r\n        return;\r\n    for (var i = 0; i < matches.length; ++i) {\r\n        var m = matches[i];\r\n        var pm = m;\r\n        mcode.makabaTags.forEach(function(tag) {\r\n            m = m.split(\"[\" + tag + \"]\").join(\"[ \" + tag + \" ]\");\r\n        });\r\n        text = text.replace(pm, m);\r\n    }\r\n    shampoo.value = text;\r\n};\r\n\r\nmcode.initSubmitHook = function() {\r\n    var sumbit = document.getElementById(\"submit\");\r\n    var wrapper = document.createElement(\"div\");\r\n    wrapper.style.display = \"inline-block\";\r\n    wrapper.style.width = \"88px\";\r\n    wrapper.style.backgroundColor = \"#EAEAEA\";\r\n    wrapper.style.borderColor = \"#CACACA\";\r\n    wrapper.style.borderWidth = \"1px\";\r\n    wrapper.style.borderStyle = \"solid\";\r\n    wrapper.style.paddingLeft = \"6px\";\r\n    wrapper.style.paddingRight = \"6px\";\r\n    wrapper.style.paddingTop = \"2px\";\r\n    wrapper.style.paddingBottom = \"2px\";\r\n    wrapper.style.marginLeft = \"2px\";\r\n    var nsubmit = document.createElement(\"a\");\r\n    nsubmit.style.color = \"#323232\";\r\n    nsubmit.onclick = function() {\r\n        mcode.processBeforeSubmit();\r\n        submit.click();\r\n    };\r\n    nsubmit.className = submit.className;\r\n    nsubmit.appendChild(document.createTextNode(submit.value));\r\n    wrapper.appendChild(nsubmit);\r\n    sumbit.parentNode.insertBefore(wrapper, submit);\r\n    submit.style.display = \"none\";\r\n};\r\n\r\nmcode.initControls = function() {\r\n    var toolbar = document.getElementById(\"CommentToolbar\");\r\n    var span = document.createElement(\"span\");\r\n    span.innerHTML = mcode.lexerSelectHtml;\r\n    var button = document.createElement(\"button\");\r\n    button.appendChild(document.createTextNode(\"Вставить тег [code]\"));\r\n    button.onclick = function() {\r\n        var sel = document.getElementById(\"makabaCodeLexer\");\r\n        var lang = sel.options[sel.selectedIndex].value;\r\n        mcode.insertCodeTag(lang);\r\n        return false;\r\n    };\r\n    span.appendChild(button);\r\n    var sButton = document.createElement(\"button\");\r\n    var img = document.createElement(\"img\");\r\n    img.src = \"https://ololoepepe.me/files/configure.png\";\r\n    sButton.appendChild(img);\r\n    sButton.title = \"Настройки\";\r\n    sButton.onclick = function() {\r\n        mcode.showSettings();\r\n        return false;\r\n    };\r\n    span.insertBefore(sButton, span.firstChild);\r\n    toolbar.appendChild(span);\r\n};\r\n\r\nmcode.executeFirstTime = function() {\r\n    mcode.execute();\r\n    document.addEventListener (\"DOMNodeInserted\", function(e) {\r\n        var el = e.target;\r\n        if (!el || !el.className)\r\n            return;\r\n        if (\"post-wrapper\" != el.className)\r\n            return;\r\n        mcode.execute();\r\n    }, false);\r\n    mcode.initSubmitHook();\r\n    mcode.initControls();\r\n};\r\n\r\nmcode.addOnloadListener = function() {\r\n    if (!document.addEventListener)\r\n        return;\r\n    document.addEventListener(\"DOMContentLoaded\", mcode.executeFirstTime, false);\r\n};\r\n\r\nmcode.addOnloadListener();\r\n",
      "libs": [],
      "options": {
        "altCSS": false,
        "altJS": false,
        "autoImportant": false,
        "on": true
      }
    }
  ]
}